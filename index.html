<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KTU CGPA & Internal Mark Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;600;700&family=Exo+2:wght@400;600;700;800&family=Space+Mono:wght@400;700&family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" href="favicon-edu.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="favicon-edu.svg">
    <meta name="theme-color" content="#07111b">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Full-screen particle background canvas -->
    <canvas id="bg-canvas" aria-hidden="true"></canvas>

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        <!-- Header Section -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white nerd-title">- KTU Calculator -</h1>
            <p class="text-lg text-gray-400 mt-2">Your all-in-one tool for SGPA, CGPA & Internal Marks</p>
        </header>

        <!-- Tab Navigation -->
        <div class="mb-8">
            <div class="glass-nav relative flex gap-1 p-1 rounded-xl border border-cyan-500/20 bg-white/5 backdrop-blur-xl shadow-[0_8px_30px_rgba(0,0,0,0.25)]" role="tablist" aria-label="Calculator tabs">
                <span id="tab-active-indicator" class="tab-indicator" aria-hidden="true"></span>
                <button id="tab-cgpa" type="button" role="tab" aria-controls="content-cgpa" aria-selected="true" class="tab-btn is-active flex-1 py-3 px-4 text-center font-semibold text-lg border-b-2 border-cyan-500 text-cyan-400">SGPA/CGPA Calculator</button>
                <button id="tab-internal" type="button" role="tab" aria-controls="content-internal" aria-selected="false" class="tab-btn flex-1 py-3 px-4 text-center font-semibold text-lg border-b-2 border-transparent text-gray-500">Internal Mark Calculator</button>
            </div>
        </div>

        <!-- Tab Content Area -->
        <main>
            <!-- CGPA Calculator Section -->
            <div id="content-cgpa" class="tab-content active">
                <div class="sticky top-0 z-10 bg-gray-900/80 backdrop-blur-sm py-4 mb-8 rounded-lg">
                    <div class="bg-gray-800 p-6 rounded-xl shadow-lg flex flex-col md:flex-row justify-around items-center gap-4">
                        <div class="text-center">
                            <h2 class="text-xl font-semibold text-cyan-400">Overall CGPA</h2>
                            <p id="cgpa-display" class="text-5xl font-bold text-white" aria-live="polite" aria-atomic="true">0.00</p>
                        </div>
                        <div class="w-full md:w-px h-px md:h-20 bg-gray-600"></div>
                        <div class="text-center">
                            <h2 class="text-xl font-semibold text-cyan-400">Total Credits</h2>
                            <p id="credits-display" class="text-5xl font-bold text-white" aria-live="polite">0</p>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center mb-8">
                    <button id="reset-button-cgpa" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-300">Reset All</button>
                </div>
                <div class="flex items-center justify-between mb-6 gap-4">
                    <div class="flex items-center gap-3 w-full md:w-1/2">
                        <label for="department-select" class="text-sm font-medium text-gray-300">Department</label>
                        <select id="department-select" class="ml-2 bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 p-2.5 w-full">
                            <option value="cs">Computer Science & Engineering</option>
                            <option value="ce">Civil Engineering</option>
                            <option value="ad">Artificial Intelligence & Data Science</option>
                            <option value="me">Mechanical Engineering</option>
                            <option value="ec">Electronics & Communication Engineering</option>
                            <option value="ee">Electrical & Electronics Engineering</option>
                            <option value="universal">Other / Universal</option>
                        </select>
                    </div>
                    <div class="text-sm text-gray-400">Subjects will update based on the selected department (embedded snapshot).</div>
                </div>
                <!-- Ultimate AI Feature: Modern File Upload -->
                <div class="ai-upload-section bg-gray-900 p-6 rounded-xl shadow-lg mb-8">
                    <h2 class="text-xl font-bold text-cyan-400 mb-4">Upload Your Results</h2>
                    <div class="upload-box flex flex-col items-center justify-center border-2 border-dashed border-cyan-500 rounded-lg p-6 cursor-pointer transition hover:border-cyan-300" id="uploadBox">
                        <input type="file" id="resultFiles" name="resultFiles" accept="image/*,.pdf" multiple style="display:none;">
                        <button type="button" id="uploadBtn" class="bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-2 px-4 rounded-lg mb-2 transition">Upload Images/PDFs</button>
                        <p class="text-gray-400 mb-2">Drag & drop files here or click to select</p>
                        <div id="filePreview" class="file-preview flex flex-wrap gap-4"></div>
                    </div>
                    <div id="aiStatus" class="ai-status mt-4 text-cyan-300"></div>
                </div>
                <div id="semesters-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Semester cards will be injected here -->
                </div>
            </div>

            <!-- Internal Mark Calculator Section -->
            <div id="content-internal" class="tab-content">
                <div class="bg-gray-800 p-8 rounded-xl shadow-lg max-w-lg mx-auto">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center">Internal Mark Calculator</h2>
                    <div class="space-y-6">
                        <!-- Series 1 -->
                        <div>
                            <label for="series1" class="block mb-2 text-sm font-medium text-gray-300">Series 1 Mark (out of 50)</label>
                            <input type="number" id="series1" class="internal-input bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5" placeholder="e.g., 45" min="0" max="50">
                        </div>
                        <!-- Series 2 -->
                        <div>
                            <label for="series2" class="block mb-2 text-sm font-medium text-gray-300">Series 2 Mark (out of 50)</label>
                            <input type="number" id="series2" class="internal-input bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5" placeholder="e.g., 48" min="0" max="50">
                        </div>
                        <!-- Assignment 1 -->
                        <div>
                            <label for="assignment1" class="block mb-2 text-sm font-medium text-gray-300">Assignment 1 Mark (out of 15)</label>
                            <input type="number" id="assignment1" class="internal-input bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5" placeholder="e.g., 14" min="0" max="15">
                        </div>
                         <!-- Assignment 2 -->
                        <div>
                            <label for="assignment2" class="block mb-2 text-sm font-medium text-gray-300">Assignment 2 Mark (out of 15)</label>
                            <input type="number" id="assignment2" class="internal-input bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5" placeholder="e.g., 15" min="0" max="15">
                        </div>
                        <!-- Attendance -->
                        <div>
                            <label for="attendance" class="block mb-2 text-sm font-medium text-gray-300">Attendance Percentage (%)</label>
                            <input type="number" id="attendance" class="internal-input bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-cyan-500 focus:border-cyan-500 block w-full p-2.5" placeholder="e.g., 95" min="0" max="100">
                        </div>
                    </div>
                    <!-- Result Display -->
                    <div class="mt-8 pt-6 border-t border-gray-700 text-center">
                        <h3 class="text-xl font-semibold text-cyan-400">Total Internal Mark</h3>
                        <p id="internal-total" class="text-5xl font-bold text-white mt-2">0 / 50</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-12 text-gray-500">
            <p>Built with ❤️. Designed by Benedict!.</p>
        </footer>
    </div>


    <!-- AI OCR & PDF Parsing Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.0.2/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="main.js"></script>
</body>
</html>
